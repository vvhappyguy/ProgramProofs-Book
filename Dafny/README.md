# Доказательство корректности компьютерных программ

## Упражнение 0.0

(AtCoffeeShop ==> DrinkEspresso) && (AtGym ==> DrinkWater)

(!AtCoffeeShop || DrinkEspresso) && (!AtGym || DrinkWater)

## Упражнение 1.0

Если x равно 10, какое значение метод присвоит параметру r?

30

## Упражнение 1.1

[1.1 - 1.dfy](1.dfy)

## Упражнение 1.2

[1.2 - 1.dfy](1.dfy)

## Упражнение 1.3

Верификатор пишет "assertion might not hold".
[1.3 - 1.dfy](1.dfy)

## 1.4

Верификатор пишет "this is the postcondition that could not be proved".

[1.4 - 1.dfy](1.dfy)

## 1.5

[1.5 - 1.dfy](1.dfy)

## 1.6

[1.6 - 1.dfy](1.2.dfy)

## 1.7

[1.7 - 1.dfy](1.2.dfy)

## 1.10

[1.10 - 1.4.dfy](1.4.dfy)

ghost Average
basic Triple
"a call to a ghost function is allowed only in specification contexts (consider declaring the function without the 'ghost' keyword)"

ghost Average
ghost Triple
OK

basic Average
ghost Triple
OK

## 1.11

Будет ошибка на ассерте для переменной b, т.к. нет постусловия из метода M.
А тело метода непрозрачно.

## 2.0

Точка 9:
x = 18
a = 21
b = 14
y = 35

Точка 10:
x = 18
y = 35

## 2.1

10 <= x && a == x + 3 && b == 12 && y == a + b ==> 25 <= y

13 <= a && b == 12 && y == a + b ==> 25 <= y

15 <= y ==> 25 <= y

## 2.2

10 <= x ==> 25 <= x + 3 + 12

10 <= x ==> 10 <= x

## 2.3

a. в инструкции z:=x-y меняем y на x (по предусловию) и z всегда 0.
б. предусловие всегда да, инструкция соответствует постусловию
в. предусловие всегда да, для целых чисел всегда да
г. состояние х не меняется инструкцией
д. состояние х меняется только от переменной х (нет сайд эффектов)
е. "игра" с записью диапазонов

## 2.4

а. любое отрицательное y
б. любое y кроме 4 до инструкции
в. постусловие никогда не выполняется
г. х = 0

## 2.5

a. 0 <= x <= 198 (99 * 2)
б. -99 <= z <= 198
в. 1 <= x < N+1

## 2.6

а. 2 <= x <= 129
б. -99 <= y <= 99
в. y - чётное && x < 100

## 2.7

а. true
б. x - нечётное
в. y <= 65

## 2.8

а. x < y
б. 0 <= x <= 50 && y <= x / 2
в. false

## 2.9

{{ x == X && y == Y}}
x:= x ^ y
{{ x ^ y == X && y == Y}}
y:= x ^ y
{{ x ^ x ^ y == X && x ^ y == Y}}
x:= x ^ y
{{ x ^ y ^ x ^ y ^ y == X && x ^ y ^ y == Y}}
{{ x ^ y ^ x ^ 0 == X && x ^ 0 == Y}}
{{ y ^ x ^ x ^ 0 == X && x ^ 0 == Y}}
{{ y ^ 0 ^ 0 == X && x == Y}}
{{ y == X && x == Y}}

## 2.10

Переход от x + y == 8 к y == 8 неправильный, т.к. нужно подставить x = 2; и тогда будет `2 + 2 + y == 8` => `y = 4`.

## 2.11

а. {{7 <= z}}
б. x == 4
в. x == 2

## 2.12

{{true}}
var x;
{forall x :: {true}}
{{0 <= x * x}} // Лемма арифметики для некомплексных чисел
x:= x * x
{{0 <= x}}

## 2.13

а. y == 10 && x == 12

б.
98 <= y && exists x0 :: x == x0 + 1
98 <= y

в.
99 <= x && exists x0 :: x == x0 + 1
99 <= x

г.
(98 =< y < x0) && (x = 3 * y + x0)     x0 = x - 3y

98 =< y && 98 =< 4y < x

## 2.14

{{x == X && y == Y}}
var tmp := x;
{{tmp == x && exists x0: x0 == X && y == Y}}
{{tmp == x && x == X && y == Y}}
x:= y;
{{x == y && tmp == x0 && x0 == X && y == Y}}
{{x == Y && tmp == X && y == Y}}
y:= tmp;
{{x == Y && tmp == X && y == tmp}}
{{x == Y && y == X}}
{{y == X && x == Y}}

